<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Specificity indexes — sp_auc • ROCnGO</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Specificity indexes — sp_auc"><meta name="description" content="Specifity indexes provide different ways of calculating partial area under
ROC curve in a specific FPR range. Two different approaches to calculate this
area are available:
sp_aup() applies standardized partial area under curve index (SpAUC).
This one calculates area under curve adjusting to points defined by curve in
selected region.
tp_auc() applies tighter partial area under curve index (TpAUC),
which calculates area under curve over the whole specified region.

"><meta property="og:description" content="Specifity indexes provide different ways of calculating partial area under
ROC curve in a specific FPR range. Two different approaches to calculate this
area are available:
sp_aup() applies standardized partial area under curve index (SpAUC).
This one calculates area under curve adjusting to points defined by curve in
selected region.
tp_auc() applies tighter partial area under curve index (TpAUC),
which calculates area under curve over the whole specified region.

"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ROCnGO</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/ROCnGO.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Specificity indexes</h1>

      <div class="d-none name"><code>specificity_indexes.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Specifity indexes provide different ways of calculating partial area under
ROC curve in a specific FPR range. Two different approaches to calculate this
area are available:</p><ul><li><p><code>sp_aup()</code> applies <em>standardized partial area under curve</em> index (SpAUC).
This one calculates area under curve adjusting to points defined by curve in
selected region.</p></li>
<li><p><code>tp_auc()</code> applies <em>tighter partial area under curve</em> index (TpAUC),
which calculates area under curve over the whole specified region.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sp_auc</span><span class="op">(</span>data <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">response</span>, <span class="va">predictor</span>, <span class="va">lower_fpr</span>, <span class="va">upper_fpr</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">tp_auc</span><span class="op">(</span>data <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">response</span>, <span class="va">predictor</span>, <span class="va">lower_fpr</span>, <span class="va">upper_fpr</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data.frame or extension (e.g. a tibble) containing values for
predictors and response variables.</p></dd>


<dt id="arg-response">response<a class="anchor" aria-label="anchor" href="#arg-response"></a></dt>
<dd><p>A data variable which must be a factor, integer or character
vector representing the class to predict on each observation or
<em>Gold Standard</em>. For more info on how to select class of interest see
<em>Methods</em> below.</p></dd>


<dt id="arg-predictor">predictor<a class="anchor" aria-label="anchor" href="#arg-predictor"></a></dt>
<dd><p>A data variable wich must be numeric, representing values of
a classifier or predictor for each observation.</p></dd>


<dt id="arg-lower-fpr-upper-fpr">lower_fpr, upper_fpr<a class="anchor" aria-label="anchor" href="#arg-lower-fpr-upper-fpr"></a></dt>
<dd><p>Lower and upper values of FPR for the region
in which to calculate the partial area under curve.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A numeric indicating the partial area under curve in the selected region.</p>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>


<p>When performing calculations response will be transformed internally to a
factor with levels (0,1), which represent absence or presence of the class we
want to predict. In order to select which class is the one to predict among
availables in response, function follows some criteria according to var type:</p><ul><li><p>integer. When working with an integer vector, function will consider the
smallest as the class to predict.</p></li>
<li><p>character. When working with a character vector, function will consider the
first value after using <code><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort()</a></code> over all posible options.</p></li>
<li><p>factor. When working with a factor var, function will select first class in
<code><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels()</a></code>.</p></li>
</ul><p>Al other classes which are not identified as the class to predict will be
collapsed into 0. For this reason, try to provide convenient names when
working or alternatively provide a factor where levels are equal to 0 and 1,
being 1 cases with the condition of interest.</p>
    </div>
    <div class="section level2">
    <h2 id="data-masking-variables">Data masking variables<a class="anchor" aria-label="anchor" href="#data-masking-variables"></a></h2>


<p>Both response and predictor support <code>data-masking</code> variables. For more
information please check <em>General usage</em> in
<a href="https://rlang.r-lib.org/reference/args_data_masking.html" class="external-link">this article</a>.</p>
<p>Nevertheless, function may use environment variables as well. In order to use
this type of variables simply set <code>data = NULL</code> and provide response and
predictor as normal, whithout data-masking.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>McClish D. K. Analyzing a Portion of the ROC Curve. <em>Medical Decision Making</em>
9, 190-195 (1989).</p>
<p>Vivo J.-M., Franco M. y Vicari D. Rethinking an ROC partial area index for
evaluating the classification performance at a high specificity range.
<em>Advances in Data Analysis and Classification</em> 12, 683-704 (2018).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Calc sp_auc in FPR region (0, 0.1)</span></span></span>
<span class="r-in"><span><span class="fu">sp_auc</span><span class="op">(</span></span></span>
<span class="r-in"><span> <span class="va">iris</span>,</span></span>
<span class="r-in"><span> response <span class="op">=</span> <span class="va">Species</span>,</span></span>
<span class="r-in"><span> predictor <span class="op">=</span> <span class="va">Sepal.Width</span>,</span></span>
<span class="r-in"><span> lower_fpr <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span> upper_fpr <span class="op">=</span> <span class="fl">0.1</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Corrected partial area under the curve (specificity 1-0.9): 0.7242</span>
<span class="r-in"><span><span class="co"># Calc tp_auc in FPR region (0, 0.1)</span></span></span>
<span class="r-in"><span><span class="fu">tp_auc</span><span class="op">(</span></span></span>
<span class="r-in"><span> <span class="va">iris</span>,</span></span>
<span class="r-in"><span> response <span class="op">=</span> <span class="va">Species</span>,</span></span>
<span class="r-in"><span> predictor <span class="op">=</span> <span class="va">Sepal.Width</span>,</span></span>
<span class="r-in"><span> lower_fpr <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span> upper_fpr <span class="op">=</span> <span class="fl">0.1</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>[*] Lower threshold already included in points ...</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>[*] Upper threshold already included in points ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.7212121</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Pablo Navarro.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

