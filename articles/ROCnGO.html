<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to ROCnGO • ROCnGO</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to ROCnGO">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ROCnGO</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/ROCnGO.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Introduction to ROCnGO</h1>
            
      

      <div class="d-none name"><code>ROCnGO.Rmd</code></div>
    </div>

    
    
<p>ROCnGO is an R package which allows to analyze the performance of a
classifier by using receiver operating characteristic
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>O</mi><mi>C</mi></mrow><annotation encoding="application/x-tex">ROC</annotation></semantics></math>)
curves. Conventional ROC based analyses tend to just use area under
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>O</mi><mi>C</mi></mrow><annotation encoding="application/x-tex">ROC</annotation></semantics></math>
curve
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mi>U</mi><mi>C</mi></mrow><annotation encoding="application/x-tex">AUC</annotation></semantics></math>)
as a metric of global performance, besides this functionality, the
package allows deeper analysis options by calculating partial area under
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>O</mi><mi>C</mi></mrow><annotation encoding="application/x-tex">ROC</annotation></semantics></math>
curve
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mi>A</mi><mi>U</mi><mi>C</mi></mrow><annotation encoding="application/x-tex">pAUC</annotation></semantics></math>)
when prioritizing local performance.</p>
<p>Furthermore, ROCnGO implements different
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mi>A</mi><mi>U</mi><mi>C</mi></mrow><annotation encoding="application/x-tex">pAUC</annotation></semantics></math>
transformations described in literature which:</p>
<ul>
<li>Make interpretation easier.</li>
<li>Allow to work with ROC curves which are not completely concave or
not at all (improper).</li>
<li>Provide additional discrimination power when comparing classifiers
with identical local performance (equal
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mi>A</mi><mi>U</mi><mi>C</mi></mrow><annotation encoding="application/x-tex">pAUC</annotation></semantics></math>).</li>
</ul>
<p>This document provides an introduction to ROCnGO tools and workflow
to study the global and local performance of a classifier.</p>
<div class="section level2">
<h2 id="prerequisites">Prerequisites<a class="anchor" aria-label="anchor" href="#prerequisites"></a>
</h2>
<p>In order to reproduce the example, following packages are needed:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pablopnc.github.io/ROCnGO/">ROCnGO</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://forcats.tidyverse.org/" class="external-link">forcats</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<p>To explore basic tools in the package we will be using
<code>iris</code> dataset. The dataset contains 5 variables for 150
flowers of 3 different species: <em>setosa</em>, <em>versicolor</em> and
<em>virginica</em>.</p>
<p>For the purpose of simplicity, we will only work with a subset of
<code>iris</code> considering only <em>setosa</em> and
<em>virginica</em> species. In the following sections, the performance
of different variables to classify cases in the different species will
be evaluated.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter cases of versicolor species</span></span>
<span><span class="va">iris_subset</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Species</span> <span class="op">!=</span> <span class="st">"versicolor"</span><span class="op">)</span></span>
<span><span class="va">iris_subset</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 100 × 5</span></span></span>
<span><span class="co">#&gt;    Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span><span class="co">#&gt;           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>          5.1         3.5          1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>          4.9         3            1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>          4.7         3.2          1.3         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>          4.6         3.1          1.5         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>          5           3.6          1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>          5.4         3.9          1.7         0.4 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>          4.6         3.4          1.4         0.3 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>          5           3.4          1.5         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>          4.4         2.9          1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>          4.9         3.1          1.5         0.1 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 90 more rows</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="global-performance">Global performance<a class="anchor" aria-label="anchor" href="#global-performance"></a>
</h2>
<div class="section level3">
<h3 id="calculate-roc-curve">Calculate ROC curve<a class="anchor" aria-label="anchor" href="#calculate-roc-curve"></a>
</h3>
<p>The foundation of this type of analyses implies to plot
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>O</mi><mi>C</mi></mrow><annotation encoding="application/x-tex">ROC</annotation></semantics></math>
curve of a classifier. This type of curves represent the classifier
probability of correctly classify a case with a condition of interest,
also known as <em>true positive rate</em> or
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">Sensitivity</mtext><annotation encoding="application/x-tex">\text{Sensitivity}</annotation></semantics></math>
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mi>P</mi><mi>R</mi></mrow><annotation encoding="application/x-tex">TPR</annotation></semantics></math>),
and the complementary probability of correctly classify a case without
the condition; also known as <em>false positive rate</em>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>−</mo><mtext mathvariant="normal">Specificity</mtext></mrow><annotation encoding="application/x-tex">1 - \text{Specificity}</annotation></semantics></math>,
or
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>−</mo><mi>T</mi><mi>N</mi><mi>R</mi></mrow><annotation encoding="application/x-tex">1 - TNR</annotation></semantics></math>,
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mi>P</mi><mi>R</mi></mrow><annotation encoding="application/x-tex">FPR</annotation></semantics></math>).</p>
<p>When working with a classifier that returns a series of numeric
values, it can be complex to say when it is classifying a case as having
the condition of interest (positive) or not (negative). To solve this
problem,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>O</mi><mi>C</mi></mrow><annotation encoding="application/x-tex">ROC</annotation></semantics></math>
curves represent
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">(</mo><mi>F</mi><mi>P</mi><mi>R</mi><mo>,</mo><mi>T</mi><mi>P</mi><mi>R</mi><mo stretchy="true" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(FPR, TPR)</annotation></semantics></math>
points considering hypothetical thresholds
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>c</mi><annotation encoding="application/x-tex">c</annotation></semantics></math>)
where a case is considered as positive if the its value is higher than
the threshold
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>&gt;</mo><mi>c</mi></mrow><annotation encoding="application/x-tex">X &gt; c</annotation></semantics></math>).</p>
<p>Curve points can be calculated by using <code><a href="../reference/roc_points.html">roc_points()</a></code>. As
most functions in the package it takes a dataset, a data frame as its
first argument. The second and third argument refer to variables in the
data frame, corresponding the variable that will be used as a classifier
and the response variable we want to predict.</p>
<p>For example, we can calculate
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>O</mi><mi>C</mi></mrow><annotation encoding="application/x-tex">ROC</annotation></semantics></math>
points for Sepal.Length as a classifier of setosa species.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate ROC points for Sepal.Lenght</span></span>
<span><span class="va">points</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/roc_points.html">roc_points</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">iris_subset</span>,</span>
<span>  predictor <span class="op">=</span> <span class="va">Sepal.Length</span>,</span>
<span>  response <span class="op">=</span> <span class="va">Species</span></span>
<span><span class="op">)</span></span>
<span><span class="va">points</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 101 × 2</span></span></span>
<span><span class="co">#&gt;      tpr   fpr</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>  1        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>  0.98     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>  0.92     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>  0.92     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>  0.92     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>  0.9      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>  0.82     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>  0.82     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>  0.82     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>  0.82     1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 91 more rows</span></span></span>
<span></span>
<span><span class="co"># Plot points</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">points</span><span class="op">$</span><span class="va">fpr</span>, <span class="va">points</span><span class="op">$</span><span class="va">tpr</span><span class="op">)</span></span></code></pre></div>
<p><img src="ROCnGO_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<p>As we may see, Sepal.Length doesn’t perform very well predicting when
a flower is from setosa species, in fact it’s the other way around, the
lower the Sepal.Length it’s more probable to have a setosa flower. This
can be tested if we change the condition of interest to virginica.</p>
</div>
<div class="section level3">
<h3 id="changing-condition-of-interest">Changing condition of interest<a class="anchor" aria-label="anchor" href="#changing-condition-of-interest"></a>
</h3>
<p>The condition of interest is automatically set to the first value in
<code>levels(response)</code>, so we can change this value by changing
the order of levels in data.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check response levels</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">iris_subset</span><span class="op">$</span><span class="va">Species</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "setosa"     "versicolor" "virginica"</span></span>
<span></span>
<span><span class="co"># Set virginica as first value in levels</span></span>
<span><span class="va">iris_subset</span><span class="op">$</span><span class="va">Species</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_relevel.html" class="external-link">fct_relevel</a></span><span class="op">(</span><span class="va">iris_subset</span><span class="op">$</span><span class="va">Species</span>, <span class="st">"virginica"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">iris_subset</span><span class="op">$</span><span class="va">Species</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "virginica"  "setosa"     "versicolor"</span></span>
<span></span>
<span><span class="co"># Plot ROC curve</span></span>
<span><span class="va">points</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/roc_points.html">roc_points</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">iris_subset</span>,</span>
<span>  predictor <span class="op">=</span> <span class="va">Sepal.Length</span>,</span>
<span>  response <span class="op">=</span> <span class="va">Species</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">points</span><span class="op">$</span><span class="va">fpr</span>, <span class="va">points</span><span class="op">$</span><span class="va">tpr</span><span class="op">)</span></span></code></pre></div>
<p><img src="ROCnGO_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="local-performance">Local performance<a class="anchor" aria-label="anchor" href="#local-performance"></a>
</h2>
<p>Sometimes a certain task may requiere prioritize e.g. high
sensitivity over global performance. In these scenarios, it’s preferable
to work in specific regions of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>O</mi><mi>C</mi></mrow><annotation encoding="application/x-tex">ROC</annotation></semantics></math>
curve.</p>
<p>We can calculate points in a specific region using
<code><a href="../reference/calc_partial_roc_points.html">calc_partial_roc_points()</a></code>. Function uses same arguments as
<code><a href="../reference/roc_points.html">roc_points()</a></code> but adding <code>lower_threshold</code>,
<code>upper_threshold</code> and <code>ratio</code>, which delimit
region in which we want to work.</p>
<p>For example, if we require to work in high sensitivity conditions, we
could check points in region
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">(</mo><mn>0.9</mn><mo>,</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(0.9, 1)</annotation></semantics></math>
of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mi>P</mi><mi>R</mi></mrow><annotation encoding="application/x-tex">TPR</annotation></semantics></math>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calc partial ROC points</span></span>
<span><span class="va">p_points</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_partial_roc_points.html">calc_partial_roc_points</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">iris_subset</span>,</span>
<span>  predictor <span class="op">=</span> <span class="va">Sepal.Length</span>,</span>
<span>  response <span class="op">=</span> <span class="va">Species</span>,</span>
<span>  lower_threshold <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  upper_threshold <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  ratio <span class="op">=</span> <span class="st">"tpr"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">p_points</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 54 × 2</span></span></span>
<span><span class="co">#&gt;    partial_tpr partial_fpr</span></span>
<span><span class="co">#&gt;          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>        0.9      0.006<span style="text-decoration: underline;">67</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>        0.94     0.02   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>        0.94     0.02   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>        0.94     0.02   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>        0.96     0.06   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>        0.98     0.06   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>        0.98     0.06   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>        0.98     0.1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>        0.98     0.1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        0.98     0.1    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 44 more rows</span></span></span>
<span></span>
<span><span class="co"># Plot partial ROC curve</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">p_points</span><span class="op">$</span><span class="va">partial_fpr</span>, <span class="va">p_points</span><span class="op">$</span><span class="va">partial_tpr</span><span class="op">)</span></span></code></pre></div>
<p><img src="ROCnGO_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="automating-analysis">Automating analysis<a class="anchor" aria-label="anchor" href="#automating-analysis"></a>
</h2>
<div class="section level3">
<h3 id="performance-metrics">Performance metrics<a class="anchor" aria-label="anchor" href="#performance-metrics"></a>
</h3>
<p>When working with a high number of classifiers, it can be difficult
to check each
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>O</mi><mi>C</mi></mrow><annotation encoding="application/x-tex">ROC</annotation></semantics></math>
individually. In these scenarios, metrics such as
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mi>U</mi><mi>C</mi></mrow><annotation encoding="application/x-tex">AUC</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mi>A</mi><mi>U</mi><mi>C</mi></mrow><annotation encoding="application/x-tex">pAUC</annotation></semantics></math>
may present more interest. Thus, by using the function
<code><a href="../reference/summarize_predictor.html">summarize_predictor()</a></code> we can obtain an overview of the
performance of a classifier.</p>
<p>For example, we could consider the performance of Sepal.Length over a
high sensitivity region,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mi>P</mi><mi>R</mi><mo>∈</mo><mrow><mo stretchy="true" form="prefix">(</mo><mn>0.9</mn><mo>,</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">TPR \in (0.9, 1)</annotation></semantics></math>,
and high specificity region,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mi>P</mi><mi>R</mi><mo>∈</mo><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo>,</mo><mn>0.1</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">FPR \in (0, 0.1)</annotation></semantics></math>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Summarize predictor in high sens region</span></span>
<span><span class="fu"><a href="../reference/summarize_predictor.html">summarize_predictor</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">iris_subset</span>,</span>
<span>  predictor <span class="op">=</span> <span class="va">Sepal.Length</span>,</span>
<span>  response <span class="op">=</span> <span class="va">Species</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  ratio <span class="op">=</span> <span class="st">"tpr"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 5</span></span></span>
<span><span class="co">#&gt;     auc   pauc np_auc fp_auc curve_shape</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 0.985 0.084<span style="text-decoration: underline;">7</span>  0.847  0.852 Concave</span></span>
<span></span>
<span><span class="co"># Summarize predictor in high spec region</span></span>
<span><span class="fu"><a href="../reference/summarize_predictor.html">summarize_predictor</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">iris_subset</span>,</span>
<span>  predictor <span class="op">=</span> <span class="va">Sepal.Length</span>,</span>
<span>  response <span class="op">=</span> <span class="va">Species</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  ratio <span class="op">=</span> <span class="st">"fpr"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 5</span></span></span>
<span><span class="co">#&gt;     auc   pauc sp_auc tp_auc curve_shape</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 0.985 0.095<span style="text-decoration: underline;">4</span>  0.976  0.973 Concave</span></span></code></pre></div>
<p>Besides
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mi>U</mi><mi>C</mi></mrow><annotation encoding="application/x-tex">AUC</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mi>A</mi><mi>U</mi><mi>C</mi></mrow><annotation encoding="application/x-tex">pAUC</annotation></semantics></math>,
the function also returns other partial indexes derived from
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mi>A</mi><mi>U</mi><mi>C</mi></mrow><annotation encoding="application/x-tex">pAUC</annotation></semantics></math>
which provide a better interpretation of performance than
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mi>A</mi><mi>U</mi><mi>C</mi></mrow><annotation encoding="application/x-tex">pAUC</annotation></semantics></math>.</p>
<p>Furthermore, if we are interested in computing these metrics
simultaneously for several classifiers <code><a href="../reference/summarize_dataset.html">summarize_dataset()</a></code>
can be used.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select classifiers to compute</span></span>
<span><span class="va">classifiers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Sepal.Length"</span>, <span class="st">"Sepal.Width"</span>, <span class="st">"Petal.Width"</span>, <span class="st">"Petal.Length"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Summarize classifiers in high sens region</span></span>
<span><span class="fu"><a href="../reference/summarize_dataset.html">summarize_dataset</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">iris_subset</span>,</span>
<span>  predictors <span class="op">=</span> <span class="va">classifiers</span>,</span>
<span>  response <span class="op">=</span> <span class="va">Species</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  ratio <span class="op">=</span> <span class="st">"tpr"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; $data</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 6</span></span></span>
<span><span class="co">#&gt;   identifier     auc   pauc np_auc fp_auc curve_shape      </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Sepal.Length 0.985 0.084<span style="text-decoration: underline;">7</span> 0.847   0.852 Concave          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Sepal.Width  0.166 0.001<span style="text-decoration: underline;">6</span> 0.016<span style="text-decoration: underline;">0</span>  0.9   Hook under chance</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Petal.Width  1     0.1    1       1     Concave          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Petal.Length 1     0.1    1       1     Concave          </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $curve_shape</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 2</span></span></span>
<span><span class="co">#&gt;   curve_shape       count</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Concave               3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Hook under chance     1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $auc</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 3</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Groups:   auc &gt; 0.5 [2]</span></span></span>
<span><span class="co">#&gt;   `auc &gt; 0.5` `auc &gt; 0.8` count</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> FALSE       FALSE           1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> TRUE        TRUE            3</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="plotting">Plotting<a class="anchor" aria-label="anchor" href="#plotting"></a>
</h3>
<p>As we have seen, by using <code><a href="../reference/roc_points.html">roc_points()</a></code> we can plot
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>O</mi><mi>C</mi></mrow><annotation encoding="application/x-tex">ROC</annotation></semantics></math>
curve. Nevertheless, these plots can be generated using
<code>plot_*()</code> and <code>add_*()</code> functions, which
furthermore, provide options to customize plot for classifier
comparison.</p>
<p>For example, we can plot
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>O</mi><mi>C</mi></mrow><annotation encoding="application/x-tex">ROC</annotation></semantics></math>
points of Sepal.Length in this way.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot ROC points of Sepal.Length</span></span>
<span><span class="va">sepal_length_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_roc_points.html">plot_roc_points</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">iris_subset</span>,</span>
<span>  predictor <span class="op">=</span> <span class="va">Sepal.Length</span>,</span>
<span>  response <span class="op">=</span> <span class="va">Species</span></span>
<span><span class="op">)</span></span>
<span><span class="va">sepal_length_plot</span></span></code></pre></div>
<p><img src="ROCnGO_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<p>Now by using <code>+</code> operator we can add further options to
the plot. For example, including chance line, adding further
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>O</mi><mi>C</mi></mrow><annotation encoding="application/x-tex">ROC</annotation></semantics></math>
points of other classifiers, etc.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sepal_length_plot</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/add_roc_curve.html">add_roc_curve</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">iris_subset</span>,</span>
<span>    predictor <span class="op">=</span> <span class="va">Sepal.Width</span>,</span>
<span>    response <span class="op">=</span> <span class="va">Species</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/add_roc_points.html">add_roc_points</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">iris_subset</span>,</span>
<span>    predictor <span class="op">=</span> <span class="va">Petal.Width</span>,</span>
<span>    response <span class="op">=</span> <span class="va">Species</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/add_partial_roc_curve.html">add_partial_roc_curve</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">iris_subset</span>,</span>
<span>    predictor <span class="op">=</span> <span class="va">Petal.Length</span>,</span>
<span>    response <span class="op">=</span> <span class="va">Species</span>,</span>
<span>    ratio <span class="op">=</span> <span class="st">"tpr"</span>,</span>
<span>    threshold <span class="op">=</span> <span class="fl">0.7</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/plot_thresholds.html">add_threshold_line</a></span><span class="op">(</span></span>
<span>    threshold <span class="op">=</span> <span class="fl">0.7</span>,</span>
<span>    ratio <span class="op">=</span> <span class="st">"tpr"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/add_chance_line.html">add_chance_line</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="ROCnGO_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Pablo Navarro.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
